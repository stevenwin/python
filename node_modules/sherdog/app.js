var sherdog = require('./lib/sherdog');
var fighter_a;
var fighter_b;
var a_age;
var a_nationality;
var a_win_ko;
var a_win_dec;
var a_win_sub;
var a_win_total;
var a_lose_ko;
var a_lose_sub;
var a_lose_dec;
var a_lose_total;
var a_lastfight_date;

var b_age;
var b_nationality;
var b_win_ko;
var b_win_dec;
var b_win_sub;
var b_win_total;
var b_lose_ko;
var b_lose_sub;
var b_lose_dec;
var b_lose_total;
var b_lastfight_date;
//var url = "http://www.sherdog.com/fighter/Matt-Riddle-34072";
var url_a = "http://www.sherdog.com/fighter/Urijah-Faber-8847";
var url_b = "http://www.sherdog.com/fighter/Cody-Garbrandt-50381";

// Compare age of two fighters
/*var compare_age = function(url_a, url_b) {*/
  /*sherdog.getFighter(url_a, function(data) {
    var fighter_a = data;
    a_age = Number(fighter_a.age);
    return a_age;
  });*/

sherdog.getFighter(url_a, data_a);
sherdog.getFighter(url_b, data_b);

function data_a(data) {
  fighter_a = data;
  a_age = Number(fighter_a.age);
  a_nationality = fighter_a.nationality;
  a_win_ko = fighter_a.wins.knockouts;
  a_win_dec = fighter_a.wins.decisions;
  a_win_sub = fighter_a.wins.submissions;
  a_win_total = fighter_a.wins.total;
  a_lose_ko = fighter_a.losses.knockouts;
  a_lose_sub = fighter_a.losses.submissions;
  a_lose_dec = fighter_a.losses.decisions;
  a_lose_total = fighter_a.losses.total;
  a_lastfight_date = dateToDay(fighter_a.fights.date);
};

function data_b(data) {
  fighter_b = data;
  b_age = Number(fighter_b.age);
  b_nationality = fighter_b.nationality;
  b_win_ko = fighter_b.wins.knockouts;
  b_win_dec = fighter_b.wins.decisions;
  b_win_sub = fighter_b.wins.submissions;
  b_win_total = fighter_b.wins.total;
  b_lose_ko = fighter_b.losses.knockouts;
  b_lose_sub = fighter_b.losses.submissions;
  b_lose_dec = fighter_b.losses.decisions;
  b_lose_total = fighter_b.losses.total;
  b_lastfight_date = dateToDay(fighter_b.fights.date);
};

setTimeout(function () {
  /*if (fighter_a) {
  console.log(a_age);
  }
  if (fighter_b) {
    console.log(b_age);
  }
  if (a_age > 32 && b_age < 32) {
    console.log(fighter_a.name+" is older than 32");
  } else if (a_age < 32 && b_age > 32) {
    console.log(fighter_b.name+" is older than 32");
  } else {
    console.log("Both fighters are younger than 32.");
  }*/
  compare_age(a_age, b_age);

}, 2000);


function compare_age(a_age, b_age) {
  if (a_age > 32 && b_age < 32) {
    console.log(fighter_a.name+" is older than 32");
  } else if (a_age < 32 && b_age > 32) {
    console.log(fighter_b.name+" is older than 32");
  } else {
    console.log("Both fighters are younger than 32.");
  }
}

function nationality(a_age, b_age) {

}

/*sherdog.getFighter(url, function(data) {
  var fighter = data;

  var a_name = fighter.name;
  var a_age = Number(fighter.age);
  var a_nationality = fighter.nationality;
  var a_win_ko = fighter.wins.knockouts;
  var a_win_dec = fighter.wins.decisions;
  var a_win_sub = fighter.wins.submissions;
  var a_win_total = fighter.wins.total;
  var a_lose_ko = fighter.losses.knockouts;
  var a_lose_sub = fighter.losses.submissions;
  var a_lose_dec = fighter.losses.decisions;
  var a_lose_total = fighter.losses.total;
  var a_lastfight_date = dateToDay(fighter.fights.date);*/


  //console.log(a_win_ko - 3);
  /*console.log(JSON.stringify(fighter, null, 4));*/

// Date string parser into int(date)
	var dateToDay = function(date) {
		var d = Date.parse(date);
    var minutes = 1000 * 60;
    var hours = minutes * 60;
    var days = hours * 24;
    var years = days * 365;

		var minute = d / minutes
    var hour = minute / 60
    var day = hour / 24
    var year = day / 365
    return day;
	};


// Grab info to paste onto website
/*var btn = document.getElementById('btn');
var ufcContainer = document.getElementById('ufc-info')

btn.addEventListener('click', function() {
  var ourRequest = new XMLHttpRequest();
  ourRequest.open('GET', 'http://liveapi.fightmetric.com/V1/800/Fnt.json')
  ourRequest.onload = function() {
    var ourData = JSON.parse(ourRequest.responseText);
    renderHTML(ourData);
  };
ourRequest.send();
});

var renderHTML = function(data) {
  var htmlString = ""

  for (i=0; i<10; i++) {
    htmlString += "<p>" + data.FMLiveFeed.Fights[i].Method + "</p>"
  };

  ufcContainer.insertAdjacentHTML('beforeend', htmlString)
};*/








/*function myFunction() {
    var d = Date.parse("jul / 07 / 2016");
    var minutes = 1000 * 60;
    var hours = minutes * 60;
    var days = hours * 24;
    var years = days * 365;

	var minute = d / minutes
    var hour = minute / 60
    var day = hour / 24
    var year = day / 365
    var y = Math.round(d / years);
    document.getElementById("demo").innerHTML = day + " years";
}*/